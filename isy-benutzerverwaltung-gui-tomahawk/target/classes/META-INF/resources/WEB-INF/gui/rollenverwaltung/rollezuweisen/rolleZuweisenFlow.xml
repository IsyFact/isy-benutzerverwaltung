<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://www.springframework.org/schema/webflow"
      xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.4.xsd"
      parent="applikationseiteParentFlow">

    <secured attributes="Benutzerverwaltung.Benutzer.Aendern"/>
    
    <var name="rolleZuweisenModel"
         class="de.bund.bva.isyfact.benutzerverwaltung.gui.rollenverwaltung.rollezuweisen.RolleZuweisenModel"/>

    <on-start>
         <evaluate expression="rolleZuweisenController.initialisiereModel(rolleZuweisenModel)"/>
    </on-start>

    <view-state id="rolleZuweisenSuchenViewState" model="rolleZuweisenModel">

        <attribute name="breadcrumbTitelSchluessel" value="MEL_Breadcrumb_Rollenzuweisung_rollenzuweisen"/>

        <transition on="filterZuruecksetzen">
	        <evaluate
	        	expression="rolleZuweisenController.filterZuruecksetzen(rolleZuweisenModel)"/>
	    </transition>

        <transition on="suche" to="rolleZuweisenViewState">
        	<evaluate expression="rolleZuweisenController.suche(rolleZuweisenModel)"/>
        </transition>
        
        
     </view-state>
     
     <view-state id="rolleZuweisenViewState">
        <transition on="filterZuruecksetzen">
	        <evaluate
	        	expression="rolleZuweisenController.filterZuruecksetzen(rolleZuweisenModel)"/>
	    </transition>

        <transition on="suche" to="rolleZuweisenViewState">
        	<evaluate expression="rolleZuweisenController.suche(rolleZuweisenModel)"/>
        </transition>
        
     	<transition on="rolleEntziehen">
            <evaluate expression="rolleZuweisenController.rolleEntziehen(rolleZuweisenModel)" />
            <evaluate expression="rolleZuweisenController.updateDisplayItems(rolleZuweisenModel)"/>
        </transition>
        
        <transition on="rolleZuweisen">
            <evaluate expression="rolleZuweisenController.rolleZuweisen(rolleZuweisenModel)" />
            <evaluate expression="rolleZuweisenController.updateDisplayItems(rolleZuweisenModel)"/>
        </transition>
     </view-state>

     <end-state id="end"/>
</flow>
